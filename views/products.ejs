<%- include('./modules/_header', {page: "Products"}); %>
<%- include('./modules/_navs', {page: "Products"}); %>


<div
    class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center border-bottom mt-0 mb-3 mt-md-3 py-4">
    <h1 class="h3 content-header">
        <i class="ic-shopping-cart"></i>
        Products
    </h1>
    <div class="content-action btn-toolbar mb-2 mb-md-0">
        <button type="button" class="btn btn-sm btn-primary" data-toggle="modal"
            data-target="#addProduct">
            <i class="ic-plus"></i>
            Add Product
        </button>
    </div>
</div>
<%- include('./modules/_alert') %>
<div class="search-area mt-4 mt-md-5 mb-4">
    <form action="" method="get" class="">
        <div class="container">
            <div class="row d-flex justify-content-center align-items-start">
                <div class="col-lg-5 mb-3 mr-lg-3 justify-self-center">
                    <div class="input-group">
                        <div class="input-group-prepend">
                            <div class="input-group-text"><i
                                    class="ic-magnifying-glass"></i></div>
                        </div>
                        <input type="text" class="form-control"
                            name=" searchQuery" placeholder="Enter Product ID">
                    </div>
                </div>
                <div class="col-lg-2 d-flex">
                    <button type="submit" class="btn btn-primary mr-2">
                        <i class="ic-magnifying-glass"></i>
                        Search
                    </button>
                    <button type="button" class="btn btn-secondary">
                        <i class="ic-print"></i>
                        Print
                    </button>

                </div>
            </div>
        </div>
    </form>
</div>

<!-- Add Product -->
<div class="modal fade" id="addProduct" tabindex="-1" role="dialog"
    data-backdrop="static">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title t-primary productForm-title">
                    Add New Product
                </h5>
                <button type="button" class="close" data-dismiss="modal"
                    aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <form action="/products" method="post" class="productForm">
                    <div class="form-group">
                        <label for="name">Product Name</label>
                        <input minlength="3" type="text" class="form-control productForm-name" name="name" required />
                    </div>
                    <div class="form-group">
                        <label for="code">Product Code</label>
                        <input type="text" class="form-control productForm-code" name="code" minlength="3" required/>
                    </div>
                    <div class="form-group">
                        <label for="rate">Product Rates</label>
                        <input type="number" class="form-control productForm-rate"
                            name="rate" required/>
                    </div>

                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary"
                            data-dismiss="modal">
                            <i class="ic-cross"></i> Close
                        </button>
                        <button type="submit" class="btn btn-primary">
                            <i class="ic-check"></i> Save Changes
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<!-- Delete Modals -->
<div data-item-types="products"  class="modal fade" id="deleteModal" tabindex="-1" role="dialog">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title text-danger">Delete Items?</h5>
                <button type="button" class="close" data-dismiss="modal"
                    aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                Do you really want to delete this?
                <p class="text-muted">This action is irreversible.</p>
                <form method="post" class="delete-form">
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary"
                            data-dismiss="modal">
                            <i class="ic-cross"></i> Close
                        </button>
                        <button type="submit" class="btn btn-danger">
                            <i class="ic-trash"></i> Confirm Delete
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<div class="content-box">
    <div class="table-responsive">
        <table class="table table-striped table-sm">
            <thead class="table__header">
                <tr>
                    <th>Product Name</th>
                    <th>Product Code</th>
                    <th>Rates(Tk.)</th>
                    <th class="text-center">Actions</th>
                </tr>
            </thead>
            <tbody class="table__body">
                <% if(locals.products) {
                    products.forEach((product)=>{ %>
                <tr>
                    <td><%= product.name %></td>
                    <td><%= product.code %></td>
                    <td><%= product.rate %></td>

                    <td class="table__actions text-center" data-item-id="<%= product.id %>">
                        <a href="#" class="table__actions-btn productEditButtons"
                            data-toggle="modal" data-target="#addProduct"><i
                                class="ic-pencil pr-2"></i>Edit</a>
                        <a href="#" class="table__actions-btn"
                            data-toggle="modal" data-target="#deleteModal"><i
                                class="ic-trash pr-2"></i>Delete</a>
                    </td>
                </tr>
                <% })} %>
            </tbody>
        </table>
    </div>
</div>


<%- include('./modules/_footer'); %>